```mermaid
graph TD

%% ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
classDef server fill:#e3f2fd,stroke:#1e88e5,stroke-width:2px
classDef client fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
classDef messaging fill:#ede7f6,stroke:#6a1b9a,stroke-width:2px
classDef warning fill:#ffebee,stroke:#c62828,stroke-width:2px

%% ã‚µãƒ¼ãƒãƒ¼å‡¦ç†
subgraph ã‚µãƒ¼ãƒãƒ¼[ðŸ–¥ï¸ ã‚µãƒ¼ãƒãƒ¼èµ·å‹•]
    S1(ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰é–‹å§‹)
    S2(TCPã‚µãƒ¼ãƒãƒ¼èµ·å‹•)
    S3(UDPã‚µãƒ¼ãƒãƒ¼èµ·å‹•)
    S4(ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå—ç†)
    S5(ãƒ«ãƒ¼ãƒ ç™»éŒ²)
    S6(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒ¬ãƒƒãƒ‰)
    S7(ç›£è¦–ã‚¹ãƒ¬ãƒƒãƒ‰)

    S1 --> S2 --> S4 --> S5
    S1 --> S3 --> S6
    S3 --> S7

    class S1,S2,S3,S4,S5,S6,S7 server
end

%% ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‡¦ç†
subgraph ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ[ðŸ§‘â€ðŸ’» ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆèµ·å‹•]
    C1(ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–‹å§‹)
    C2(TCPæŽ¥ç¶š)
    C3(ãƒ¦ãƒ¼ã‚¶ãƒ¼åå…¥åŠ›)
    C4(ãƒ«ãƒ¼ãƒ é¸æŠž)
    C5a(ãƒ«ãƒ¼ãƒ ä½œæˆ)
    C5b(ãƒ«ãƒ¼ãƒ å‚åŠ )
    C6a(ãƒˆãƒ¼ã‚¯ãƒ³å—ä¿¡)
    C6b(ãƒˆãƒ¼ã‚¯ãƒ³å—ä¿¡)
    C7(UDPé–‹å§‹)
    C8(ãƒãƒ£ãƒƒãƒˆé–‹å§‹)

    C1 --> C2 --> C3 --> C4
    C4 -->|ä½œæˆ| C5a --> C6a
    C4 -->|å‚åŠ | C5b --> C6b
    C2 --> C7 --> C8

    class C1,C2,C3,C4,C5a,C5b,C6a,C6b,C7,C8 client
end

%% ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†
subgraph é€šä¿¡[ðŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šä¿¡ï¼†ç›£è¦–]
    M1(UDPå—ä¿¡)
    M2(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è§£æž)
    M3(ãƒ«ãƒ¼ãƒ ã¸é…ä¿¡)
    M4(éžã‚¢ã‚¯ãƒ†ã‚£ãƒ–ç›£è¦–)
    M5(ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†)

    M1 --> M2 --> M3
    M1 --> M4 --> M5

    class M1,M2,M3,M4,M5 messaging
end

%% çµ‚äº†å‡¦ç†
subgraph çµ‚äº†[ðŸšª ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçµ‚äº†]
    E1(ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒexit)
    E2(UDPã§é€šçŸ¥)
    E3(ã‚½ã‚±ãƒƒãƒˆçµ‚äº†)
    E4(ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆé€šçŸ¥)
    E5(ãƒ«ãƒ¼ãƒ å‰Šé™¤)

    E1 --> E2 --> E3
    E4 --> E5

    class E1,E2,E3,E4,E5 warning
end

%% æŽ¥ç¶šã®æµã‚Œï¼ˆç°¡ç•¥ï¼‰
S1 --> C1
C8 --> M1
M5 --> E4
```



